% !TeX root =./x2.tex
% !TeX program = pdfpLaTeX


\chapter{線形代数以前の話}
\label{chap:prelim}
\section{体}
$K$を集合とする.
$K$に四則演算(加減乗除)が定まっているとき,
$K$は
\defit{体}\footnote{タイと読む.}
\Defit{field}
であるという.
ただし,
``四則演算が定まっている''
とは, 次を満たしていることとする:
\begin{enumerate}
\item
  $s,t\in K$に対し$s+t$という$K$の元が定まる.
  (この演算を加法と呼ぶ.)
  さらに, $0$という(特別な)元がある.

  $a,b,c\in K$なら, 次が成り立つ:
  \begin{enumerate}
  \item
    $(a+b)+c=a+(b+c)$.
  \item
    $a+b=b+a$.
  \item
    $0+a=a$.
  \item
    $x$に関する方程式
    \begin{align*}
      a+x=0
    \end{align*}
    が($K$の元の)解を持つ.
  \end{enumerate}
\item
  $a+x=0$が解を持つとき,
  その解は,
  $a$が定まればただ一つに定まるので,
  この解を$-a$と書く.

  $b+(-a)$を$b-a$と略記する。
  (この演算を加法と呼ぶ.)

\item
  $s,t\in K$に対し$st$という$K$の元が定まる.
  (この演算を乗法と呼ぶ.)
  さらに, $1$という(特別な)元がある.

  $a,b,c\in K$なら, 次が成り立つ:
  \begin{enumerate}
  \item
    $(ab)c=a(bc)$.
  \item
  \label{def:field:item:comring}
    $ab=ba$.
  \item
    $1a=a1=a$.
  \item
  \label{def:field:item:invertible}
    $a\neq 0$ならば,
    $x$に関する方程式
    \begin{align*}
      ax=1
    \end{align*}
    が($K$の元の)解を持つ.
  \end{enumerate}

\item
  $ax=1$が解を持つとすると,
  その解は,
  $a$が定まればただ一つに定まるので,
  この解を$a^{-1}$とか$\frac{1}{a}$と書く.

  $b(\frac{1}{a})$を$\frac{b}{a}$と略記する。
  (この演算を除法と呼ぶ.)

\item
  $a,b,c\in K$なら, 以下が成り立つ:
  \begin{enumerate}
  \item $a(b+c)=ab+ac$.
  \item $0\neq 1$.
  \end{enumerate}
\end{enumerate}
\begin{example}
  $\RR$は体である.
\end{example}

上の例では,
実数をすべて集めた集合が
体であるということを言っている.
実数の計算の際に使われる
結合則, 分配則, 可換則など
の計算規則を抜き出してきて,
抽象化$\cdot$一般化したものが
体である.
結合則, 分配則, 可換則が成り立つ
(その集合の中で閉じた)四則演算(加減乗除)が備わった数の集合が体である
といってもいい.
この様に抽象化しておくことで,
実数以外にも理論を適用できるようになる.
例えば, 以下に挙げる\Cref{ex:cc,ex:qq}のようなよく見慣れた数達も体であるし,
\Cref{ex:f2}のような有限個しか元を持たない体というものも存在する.
\begin{example}
\label{ex:cc}
  $\CC$は体である.
\end{example}
\begin{example}
\label{ex:qq}
  $\QQ$は体である.
\end{example}
\begin{example}
\label{ex:f2}
$K=\Set{0,1}$とし,
$0+0=1+1=0$, $1+0=0+1=1$,
$0\cdot 0=1\cdot 0=0\cdot 1=0$, $1\cdot 1=1$
と定めると$K$は体となる.
このように有限集合である体もある.
\end{example}

様々な体に適用できるように,
本原稿においては,
$\CC$のみを扱うとか,
$\RR$のみを扱うといったようなことは,
基本的にはしない.
しかし,
読み進める上では,
適宜$\QQ$, $\CC$, $\RR$などの具体的な体に読み替えても,
特段の影響はない.


%% なお体であるためには,
%% $0$でなければ逆数を持つ
%% という条件\cref{def:field:item:invertible}があるので,
%% 整数全体は, 加減乗の3つはあるが体ではない.
%% \begin{example}
%%   $2\in\ZZ$ではあるが$\frac{1}{2}\not\in \ZZ$である.
%%   したがって$2x=1$は$\ZZ$の元の解を持たない.
%%   $2\neq 0$であるが$2x=1$は$\ZZ$の元の解を持たないので,
%%   $\ZZ$は体ではない.
%% \end{example}


記法に関していくつかの注意をする.
\begin{remark}
  掛け算は$ab$または$a\cdot b$のように書き表す.
  ($\times$は本原稿では別の意味で使うので,
  掛け算の意味では用いない)
\end{remark}


$\KK$を体とし,
$I$を有限集合とする.
各$i\in I$に対し$a_i\in \KK$が与えられているとき,
$a_i$達の和を$\sum_{i\in I} a_i$で表す.
また,
$a_i$達の積を$\prod_{i\in I} a_i$で表す.

\begin{remark}
$I$が無限集合であるとき,
$\sum_{i\in I} a_i$や$\prod_{i\in I} a_i$は
$\KK$の演算からは定義できない.
ただし,
$\Set{i \in I |a_i\neq 0}$が有限集合であるときには,
$a_i\neq 0$となる$a_i$達の和を$\sum_{i\in I} a_i$で表す.
また,
$\Set{i \in I |a_i\neq 1}$が有限集合であるときには,
$a_i\neq 1$となる$a_i$達の積を$\sum_{i\in I} a_i$で表す.
\end{remark}


\chapter{線形空間と線形写像}
\label{chap:linspace:linmap}
本稿全体を通し,
特に断らなければ,
$(\KK,+,\cdot,0,1)$を体とする.

ここでは, $\KK$線形空間と$\KK$上の線形写像を定義し,
いくつかの例を挙げる.
また, $\KK$線形空間が同型であるということを定義する.
線形写像や同型写像については,
用語を一旦用意してしまうことを目的としており,
詳細についてはここでは触れない,
後で詳しく議論する.

\section{線形空間の定義とその例}
\label{sec:linspace:def}

線形空間の定義と例を挙げる.

\begin{definition}
\label{def:vecsp}
  $V$を集合とする.
  $\plus\colon V\times V \to V$を$V$上の二項演算とする.
  $\act \colon \KK\times V \to V$を$\KK$の$V$への作用とする.
  $0_V \in V$とする.

  以下の条件を満たすとき,
  $(V,\plus,\act ,0_V)$は$\KK$上の\defit{ベクトル空間}であるとか
  $\KK$-\defit{線形空間}であるいう:
  \begin{enumerate}
  \item 
    \begin{enumerate}
      \label{def:vecsp:item:com}
    \item $u,w \in V\implies  u\plus w=w\plus u$.
    \item
      \label{def:vecsp:item:sum:ass}
      $v,w,u\in V \implies (v\plus w)\plus u=v\plus (w\plus u)$.
    \item $w\in V \implies 0_V\plus w=w$.
    %\item $w\in V\implies $ `$w\plus x=0_V$を満たす$x\in V$が存在する'.
    \item $w\in V\implies w\plus (-1).w=0_V$.%を満たす$x\in V$が存在する'.
    \end{enumerate}
  \item
    \begin{enumerate}
    \item
      \label{def:vecsp:item:prod:ass}
      $\alpha,\beta\in\KK, w\in V \implies \alpha\act (\beta \act w)=(\alpha\cdot \beta)\act w$
    \item $w\in V \implies 1\act w=w$.
    \end{enumerate}
  \item
    \begin{enumerate}
    \item
      \label{def:vecsp:item:dist:r}
$\alpha\in \KK,u,w\in V \implies \alpha\act (u\plus w)=(\alpha\act u)\plus (\alpha\act w)$.
    \item
      \label{def:vecsp:item:dist:l}
$\alpha,\beta\in\KK, w\in V\implies (\alpha+\beta)\act w=(\alpha\act w)\plus (\beta\act w)$.
    \end{enumerate}
  \end{enumerate}
\end{definition}

\begin{example}
\label{ex:numvecsp2}
  \begin{align*}
  V
  =\Set{\begin{pmatrix}a_1\\a_2\end{pmatrix}|a_1,a_2\in \KK}
  \end{align*}
  とおく.
  このとき, $a_i,b_i,\alpha\in\KK$に対し,
  \begin{align*}
  \begin{pmatrix}a_1\\a_2\end{pmatrix}+\begin{pmatrix}b_1\\b_2\end{pmatrix}
  &=\begin{pmatrix}a_1+b_1\\a_2+b_2\end{pmatrix},\\
  \alpha\begin{pmatrix}a_1\\a_2\end{pmatrix}
  &=\begin{pmatrix}\alpha a_1\\\alpha a_2\end{pmatrix}
  \intertext{とし,}
  \zzero_2&=\begin{pmatrix}0\\0\end{pmatrix} \end{align*}
  とおくと,
  $V$はこれらの演算で$\zzero_2$を零元とする$\KK$-線形空間である.
  実際, 以下がかなり立っている.
  \begin{enumerate}
  \item 
    \begin{enumerate}
    \item $a_i,b_i\in\KK$に対し,
    \begin{align*}
\begin{pmatrix}a_1\\a_2\end{pmatrix}+\begin{pmatrix}b_1\\b_2\end{pmatrix}
=\begin{pmatrix}a_1+b_1\\a_2+b_2\end{pmatrix}\\
\begin{pmatrix}b_1\\b_2\end{pmatrix}+\begin{pmatrix}a_1\\a_2\end{pmatrix}
=\begin{pmatrix}b_1+a_1\\b_2+a_2\end{pmatrix}
\end{align*}
    \item  $a_i,b_i\in\KK$に対し,
    \begin{align*}
(\begin{pmatrix}a_1\\a_2\end{pmatrix}+\begin{pmatrix}b_1\\b_2\end{pmatrix})
+\begin{pmatrix}c_1\\c_2\end{pmatrix}
=\begin{pmatrix}a_1+b_1\\a_2+b_2\end{pmatrix}
+\begin{pmatrix}c_1\\c_2\end{pmatrix}
=\begin{pmatrix}(a_1+b_1)+c_1\\(a_2+b_2)+c_2\end{pmatrix}\\
\begin{pmatrix}a_1\\a_2\end{pmatrix}+
(\begin{pmatrix}b_1\\b_2\end{pmatrix}
+\begin{pmatrix}c_1\\c_2\end{pmatrix})
=\begin{pmatrix}a_1\\a_2\end{pmatrix}
+\begin{pmatrix}b_1+c_1\\b_2+c_2\end{pmatrix}
=\begin{pmatrix}a_1+(b_1+c_1)\\a_2+(b_2+c_2)\end{pmatrix}.
\end{align*}
    \item $a_i\in\KK$に対し,
    \begin{align*}
    \zzero_2+\begin{pmatrix}a_1\\a_2\end{pmatrix}
=    \begin{pmatrix}0\\0\end{pmatrix}+\begin{pmatrix}a_1\\a_2\end{pmatrix}
=\begin{pmatrix}0+a_1\\0+a_2\end{pmatrix}
=\begin{pmatrix}a_1\\a_2\end{pmatrix}
\end{align*}
    \item $a_i\in\KK$に対し,
    \begin{align*}
    \begin{pmatrix}a_1\\a_2\end{pmatrix}+(-1\begin{pmatrix}a_1\\a_2\end{pmatrix})
    =\begin{pmatrix}a_1\\a_2\end{pmatrix}+\begin{pmatrix}-a_1\\-a_2\end{pmatrix}
    =\begin{pmatrix}a_1-a_1\\a_2-a_2\end{pmatrix}
=\begin{pmatrix}0\\0\end{pmatrix}\
=\zzero_2
\end{align*}
    \end{enumerate}
  \item
    \begin{enumerate}
    \item
      $\alpha,\beta\in\KK$, $a_i\in\KK$に対し,
    \begin{align*}
    \alpha(\beta\begin{pmatrix}a_1\\a_2\end{pmatrix})
    =\alpha\begin{pmatrix}\beta a_1\\\beta a_2\end{pmatrix}
    =\begin{pmatrix}\alpha(\beta a_1)\\\alpha(\beta a_2)\end{pmatrix}\\
    (\alpha\beta)\begin{pmatrix}a_1\\a_2\end{pmatrix}
    =\begin{pmatrix}(\alpha\beta) a_1\\(\alpha\beta) a_2\end{pmatrix}
\end{align*}
\item
$a_i\in\KK$に対し,
    \begin{align*}
    1\begin{pmatrix}a_1\\a_2\end{pmatrix}
    =\begin{pmatrix}1 a_1\\1 a_2\end{pmatrix}
    =\begin{pmatrix}a_1\\a_2\end{pmatrix}
    \end{align*}
    \end{enumerate}
  \item
    \begin{enumerate}
    \item
$\alpha\in \KK$, $a_i,b_i\in\KK$に対し,
    \begin{align*}
\alpha(\begin{pmatrix}a_1\\a_2\end{pmatrix}+\begin{pmatrix}b_1\\b_2\end{pmatrix})
=\alpha\begin{pmatrix}a_1+b_1\\a_2+b_2\end{pmatrix}
=\begin{pmatrix}\alpha(a_1+b_1)\\\alpha(a_2+b_2)\end{pmatrix}\\
\alpha\begin{pmatrix}a_1\\a_2\end{pmatrix}+\alpha\begin{pmatrix}b_1\\b_2\end{pmatrix}
=\begin{pmatrix}\alpha a_1\\\alpha a_2\end{pmatrix}+\begin{pmatrix}\alpha b_1\\\alpha b_2\end{pmatrix})
=\begin{pmatrix}\alpha a_1+\alpha b_1\\\alpha a_2+\alpha b_2\end{pmatrix}
\end{align*}
    \item
$\alpha,\beta\in\KK$, $a_i,b_i\in\KK$に対し,
    \begin{align*}
(\alpha+\beta)\begin{pmatrix}a_1\\a_2\end{pmatrix}
=\begin{pmatrix}(\alpha+\beta)a_1\\(\alpha+\beta)a_2\end{pmatrix}\\
\alpha\begin{pmatrix}a_1\\a_2\end{pmatrix}+\beta\begin{pmatrix}a_1\\a_2\end{pmatrix}
=\begin{pmatrix}\alpha a_1\\\alpha a_2\end{pmatrix}+\begin{pmatrix}\beta a_1\\\beta a_2\end{pmatrix}
\end{align*}
    \end{enumerate}
  \end{enumerate}
  
\end{example}


2つの実数を並べて組にしたものをベクトルと呼び, 扱ったことがあると思う.
(ここでは縦に並べているが, そのときは横に並べたかもしれない. その違いは一旦無視して欲しい.)
上の例は,
ベクトルを集めた集合
が$\KK$-線形空間であるということをいっている.
ベクトルの計算の際に使われる計算規則を抜き出して
抽象化$\cdot$一般化したものが$\KK$-線形空間である.

 $(V,\plus,\act ,0_V)$が体$\KK$上のベクトル空間
  であるとき,
  $V$の元を\defit{ベクトル}と呼ぶ.
  また, $0_V$を$V$の\defit{零元}もしくは\defit{零ベクトル}と呼ぶ.
  $\plus$を\defit{加法},
  $\act $を\defit{スカラー倍}と呼ぶ.


\begin{remark}
  $(V,\plus,\act ,0_V)$が$\KK$-線形空間であることを,
  $V$は加法$\plus$とスカラー倍$\act $で$0_V$を零元とする$\KK$-線形空間であるということもある.
  また, $\plus$, $\act $, $0_V$が文脈上明らかなときには,
  単に$V$を$\KK$-線形空間と呼ぶこともある.
\end{remark}
%% \begin{remark}
%% $x$がベクトルであるとは,
%% 何某かのベクトル空間$V$があり$x$は$V$の元であるといっているだけである.
%% ベクトルは向きと大きさを持ったものと説明されることもあるが,
%% このメタファーは理解の役に立つこともあるものの,
%% 理解の弊害となることも多い.
%% このメタファーに囚われない方が良いかもしれない.
%% \end{remark}

まず, $\KK$-線形空間の例をいくつか挙げる.
\Cref{ex:numvecsp2}の例を自然に拡張した以下のものは$\KK$-線形空間である.
\begin{example}
\label{ex:num:vecsp}
  $n\geq 1$とする. このとき, \begin{align*} \KK^n
  =\Set{\begin{pmatrix}a_1\\\vdots\\a_n\end{pmatrix}|a_1,\ldots,a_n\in \KK} \end{align*}
  とおく. このとき, $a_i,b_i,\alpha\in\KK$に対し,
  \begin{align*} \begin{pmatrix}a_1\\\vdots\\a_n\end{pmatrix}+\begin{pmatrix}b_1\\\vdots\\b_n\end{pmatrix}
  &=\begin{pmatrix}a_1+b_1\\\vdots\\a_n+b_n\end{pmatrix},\\
  \alpha\begin{pmatrix}a_1\\\vdots\\a_n\end{pmatrix}
  &=\begin{pmatrix}\alpha a_1\\\vdots\\\alpha a_n\end{pmatrix}
  \intertext{とし,}
  \zzero_n&=\begin{pmatrix}0\\\vdots\\0\end{pmatrix} \end{align*}とお
  くと, $\KK^n$はこれらの演算で$\zzero_n$を零元とする$\KK$-線形空間.
  これを$\KK$上の$n$次元\defit{数ベクトル空間}と呼ぶ.
  今後, $i$番目のみ$1$で他
  は$0$である$\KK^n$の元を, $\ee^{(n)}_i$で表す.
  この記号を用いると,
  \begin{align*} \aaa= \begin{pmatrix}
  a_1\\\vdots\\a_n \end{pmatrix}\in\KK^n \end{align*}は,
  $\aaa=a_1\ee^{(n)}_i+\cdots+a_n\ee^{(n)}_n$と書くことができる.
\end{example}
  
\begin{example}
  また, 形式的に,
  長さ$0$の列, つまり空列$()$を考え,
  これを$\zzero_0$と書き,
  \begin{align*}
    \KK^0
    =\Set{\zzero_0}
  \end{align*}
  とおく.
  このとき, $\alpha\in\KK$に対し,
  \begin{align*}
    \zzero_0+\zzero_0&=\zzero_0\\
    \alpha \zzero_0&=\zzero_0
  \end{align*}
  とおくと,
  $\KK^0$はこれらの演算で
  $\zzero_0$を零元とする
  $\KK$-線形空間.
  これを$\KK$上の\defit{$0$次元数ベクトル空間}と呼ぶ.
\end{example}

\begin{example}
$\KK$は$\KK$-線形空間である.
\end{example}

\Cref{ex:numvecsp2}の例を自然に拡張し
\cref{ex:num:vecsp}の他にも様々な線形空間がある.
例えば,
%数列をすべて集めてきた集合は$\KK$-線形空間である(\Cref{ex:seq:vecsp}).
実関数をすべて集めてきた集合や,
複素数をすべて集めてきた集合なども$\RR$-線形空間である.
%% \begin{example}
%%   $n,m\geq 1$とし,
%%   $I=\Set{1,\ldots,m}$, $J=\Set{1,\ldots, n}$とする.
%%   このとき,
%%   \begin{align*}
%%     \KK^{m \times n}
%%     =\Set{(a_{i,j})_{i\in I,j\in J}|a_{i,j}\in \KK}
%%   \end{align*}
%%   とおく.
%%   このとき, $a_{i,j},b_{i,j},\alpha \in\KK$に対し,
%%   \begin{align*}
%%     (a_{i,j})_{i\in I,j\in J}
%%     +(b_{i,j})_{i\in I,j\in J}
%%       &=(a_{i,j}+b_{i,j})_{i\in I,j\in J},\\
%%     \alpha (a_{i,j})_{i\in I,j\in J}
%%     &=(\alpha a_{i,j})_{i\in I,j\in J}
%%     \intertext{とし,}
%%     O_{m,n}&=(0)_{i\in I,j\in J}
%%   \end{align*}
%%   とおくと,
%%   $\KK^{m \times n}$は
%%   これらの演算で
%%   $O_{m,n}$を零元とする
%%   $\KK$-線形空間.
%% \end{example}



%% \begin{example}
%% \label{ex:seq:vecsp}
%%   $\NN$で添字付けられた数列$a_0, a_1,\ldots$を
%%   $(a_i)_{i\in \NN}$
%%   で表す.
%%   \begin{align*}
%%     \ell(\KK) = \Set{(a_i)_{i\in \NN}|a_i\in \KK}
%%   \end{align*}
%%   とおく.
%%   次の和とスカラー倍で, $(0)_{i\in \NN}$を零元とする$\KK$-線形空間:
%%   $\alpha \in\KK$, $(a_i)_{i\in \NN},(b_i)_{i\in \NN}\in \ell(\KK)$に対し,
%%   \begin{align*}
%%     (a_i)_{i\in \NN}+(b_i)_{i\in \NN} &= (a_i+b_i)_{i\in \NN},\\
%%     \alpha (a_i)_{i\in \NN} &= (\alpha a_i)_{i\in \NN}.
%%   \end{align*}
%% \end{example}

%% \begin{example}
%%   $S$を集合とする.
%%   \begin{align*}
%%     \KK^S = \Set{f\colon S \to \KK \text{; 写像}}
%%   \end{align*}
%%   とする.
%%   $\alpha \in\KK$, $f,g\in \KK^S$に対し,
%%   $f+g\in \KK^S$と$\alpha \act f\in\KK^S$を以下で定める:
%%   $x\in S$に対し,
%%   \begin{align*}
%%     (f+g)(x) &= f(x)+g(x),\\
%%     (\alpha f)(x) &= \alpha (f(x)).
%%   \end{align*}
%%   また $\underline{0}\in\KK^S$を以下で定める:
%%   $x\in S$に対し,
%%   \begin{align*}
%%     \underline{0}(x)=0.
%%   \end{align*}
%%   このとき, $\KK^S$はこれらの演算で,
%%   $\underline{0}$を零元とする
%%   $\KK$-線形空間.
%% \end{example}

%% \begin{example}
%%   $S$を集合とし, $(V,+,\act,0_V)$を$\KK$-線形空間とする.
%%   \begin{align*}
%%     V^S = \Set{f\colon S \to V \text{; 写像}}
%%   \end{align*}
%%   とする.
%%   $\alpha\in\KK$, $f,g\in V^S$に対し,
%%   $f+g\in V^S$と$\alpha f\in V^S$を以下で定める:
%%   $x\in S$に対し,
%%   \begin{align*}
%%     (f+g)(x) &= f(x)+g(x),\\
%%     (\alpha f)(x) &= \alpha\act (f(x)).
%%   \end{align*}
%%   また $\underline{0_V}\in\KK^S$を以下で定める:
%%   $x\in S$に対し,
%%   \begin{align*}
%%     \underline{0_V}(x)=0_V.
%%   \end{align*}
%%   このとき,
%%   $\KK^S$はこれらの演算で
%%   $\underline{0_V}$を零元とする
%%   $\KK$-線形空間.
%% \end{example}

\begin{example}
$\RR$から$\RR$の関数をすべて集めた集合を$V$とおく.
このとき, 
  $\alpha \in\RR$, $f,g\in V$に対し,
  $f+g\in V$と$\alpha f\in V$を以下で定める:
  $x\in \RR$に対し,
  \begin{align*}
    (f+g)(x) &= f(x)+g(x),\\
    (\alpha f)(x) &= \alpha (f(x)).
  \end{align*}
  また $\underline{0}\in V$を以下で定める:
  $x\in \RR$に対し,
  \begin{align*}
    \underline{0}(x)=0.
  \end{align*}
  このとき, $V$はこれらの演算で,
  $\underline{0}$を零元とする
  $\RR$-線形空間.

%% で連続なものをすべて集めた集合を$C^0$とおく.
%% $\RR$から$\RR$の関数で$1$回微分可能でその導関数が連続なものをすべて集めた集合を$C^1$とおく.
%% $\RR$から$\RR$の関数で$n$回微分可能でその$n$階導関数が連続なものをすべて集めた集合を$C^n$とおく.
%% 任意有限階の導関数をもつ
%% $\RR$から$\RR$の関数をすべて集めた集合を$C^\infty$とおく.
%% これらは, $\RR^\RR$と同じ演算で, $\RR$-線形空間である.
\end{example}

%% \begin{example}
%%   %$(\KK,+,\cdot,0)$を体とする.
%%   体としての和と積で$\KK$は, $\KK$-線形空間.
%%   つまり, $(\KK,+,\cdot,0)$は, $\KK$-線形空間.
%% \end{example}


\begin{example}
\label{ex:c:real:vecs}
  $\CC=\Set{a+b\sqrt{-1}|a,b\in \RR}$は,
  通常の和と積で$\CC$-線形空間.
  また,
  $\CC$は,
  通常の和と積で$\RR$-線形空間でもある.
\end{example}


%% \begin{example}
%%   \begin{align*}
%%     V=\Set{a+b\sqrt{2}|a,b\in\QQ}
%%   \end{align*}
%%   とすると,
%%   通常の和と積で$\QQ$-線形空間.
%% \end{example}

%% \begin{example}
%%   $\zeta_n= e^{\frac{2\pi\sqrt{-1}}{n}}=\cos(\frac{2\pi}{n})+\sqrt{-1}\sin(\frac{2\pi}{n})$
%%   とする.
%%   \begin{align*}
%%     V=\Set{\sum_{i=0}^{n}a_i\zeta_n^i|a_i\in\QQ}
%%   \end{align*}
%%   とすると,
%%   通常の和と積で$\QQ$-線形空間.
%% \end{example}



\section{線形写像と同型写像}
\label{sec:linmap:def}
\begin{definition}
  $(V,\plus,\act)$, $(W,\pplus,\aact)$を$\KK$-線形空間とする.
  $\varphi$を$V$から$W$への写像とする.
  $\varphi$が以下の条件を満たすとき,
  $\varphi$は$(V,\plus,\act)$から$(W,\pplus,\aact)$への$\KK$-\defit{線形写像}であるという:
  \begin{enumerate}
    \item $v,u\in V\implies \varphi(v\plus u)=\varphi(v)\pplus\varphi(u)$.
    \item $\alpha\in \KK, u\in V\implies \varphi(\alpha\act v)=\alpha\aact\varphi(v)$.
  \end{enumerate}
  $\varphi$は$(V,\plus,\act)$から$(W,\pplus,\aact)$への$\KK$-線形写像であることを,
  写像$\varphi$は\defit{$\KK$-線形}であるとも言う.
\end{definition}

\begin{example}
$\KK^2$も$\KK$も$\KK$-線形空間であった.
例えば,
\begin{align*}
\shazo{\varphi}{\KK^2}{\KK}
{\begin{pmatrix}a\\b\end{pmatrix}}{a+b}
\end{align*}
は$\KK^2$から$\KK$への$\KK$-線形写像である.
実際, 次が言える:
  \begin{enumerate}
    \item
    $a_i,b_i\in \KK$に対し,
    \begin{align*}
    \varphi(\begin{pmatrix}a_1+b_1\\a_2+b_2\end{pmatrix})
    &=(a_1+b_1)+(a_2+b_2)\\
    \varphi(\begin{pmatrix}a_1\\a_2\end{pmatrix})+\varphi(\begin{pmatrix}b_1\\b_2\end{pmatrix})
    &=(a_1+a_2)+(b_2+b_2).
    \end{align*}
    \item
    $\alpha, a_1,a_2\in\KK$に対し,
    \begin{align*}
    \varphi(\begin{pmatrix}\alpha a_1\\\alpha a_2\end{pmatrix})
    &=\alpha a_1+\alpha a_2\\
    \alpha \varphi(\begin{pmatrix}a_1\\a_2\end{pmatrix})
    &=\alpha(a_1+a_2).
    \end{align*}
  \end{enumerate}
\end{example}

\begin{example}
$V$を$\RR$係数多項式関数全体の集合とすると$\RR$-線形空間となる.
$f\in V$に対し, $f$の微分を対応させる写像
\begin{align*}
\shazo{\varphi}{V}{V}
{f}{\frac{d}{dx}f}
\end{align*}
は$V$から$V$への$\RR$-線形写像である.
\end{example}


\begin{example}
  $a\in\RR$とする.
  $\varphi$を次の写像とする:
  \begin{align*}
    \shazo{\varphi}{\RR}{\RR}{x}{ax}.
  \end{align*}
  これは$\RR$-線形写像である.
  $\psi$を次の写像とする:
  \begin{align*}
    \shazo{\psi}{\RR}{\RR}{x}{ax+1}.
  \end{align*}
  これは$\RR$-線形写像ではない.
  $\phi$を次の写像とする:
  \begin{align*}
    \shazo{\phi}{\RR}{\RR}{x}{x^3}.
  \end{align*}
  これは$\RR$-線形写像ではない.
\end{example}


次に同型写像や同型という概念を定義する.
\begin{definition}
  $V$, $W$を$\KK$-線形空間とする.
  以下の条件を満たす
  $\varphi\colon V\to W$を,
  $V$から$W$への($\KK$-線形空間としての)\defit{同型写像}と呼ぶ:
  \begin{enumerate}
  \item $\varphi\colon V\to W$は$\KK$-線形写像.
  \item 以下の条件を満たす$\KK$-線形写像$\psi\colon W \to V$が存在する:
    \begin{enumerate}
      \item $\varphi\circ \psi=\id_W$.
      \item $\psi\circ \varphi=\id_V$.
    \end{enumerate}
  \end{enumerate}
\end{definition}
\begin{definition}
  $V$, $W$を$\KK$-線形空間とする.
  $V$から$W$への($\KK$-線形空間としての)同型写像が存在するとき,
  $V$と$W$は($\KK$-線形空間として)\defit{同型}であるといい,  
  $V\simeq W$と書く.
\end{definition}

同型写像の例を挙げる:
\begin{example}
  $\RR$-線形写像$\varphi$を以下で定める:
  \begin{align*}
    &\shazo{\varphi}{\RR^2}{\CC}{\begin{pmatrix}x\\y\end{pmatrix}}{x+y\sqrt{-1}}.
  \end{align*}
  このとき,
  $\psi$を
  \begin{align*}
    &\shazo{\varphi}{\RR^2}{\CC}{\begin{pmatrix}x\\y\end{pmatrix}}{x+y\sqrt{-1}},\\
   &\shazo{\psi}{\CC}{\RR^2}{x+y\sqrt{-1}}{\begin{pmatrix}x\\y\end{pmatrix}}.
  \end{align*}
  とすると,
  $\RR$-線形であり,
  $\varphi\circ \psi=\id_\CC$,
  $\psi\circ\varphi=\id_{\RR^2}$である.
  よって, 同型写像であり,
  $\RR$-線形空間として$\RR^2\simeq\CC$である.
\end{example}



\begin{remark}
  $V$と$W$を$\KK$-線形空間とする.
  $\varphi\colon V\to W$が$\KK$-線形写像であるとき,
  $V$において和やスカラー倍に関してなりたつことは,
  $\varphi$を通して, $W$における命題に翻訳できる.
  $\varphi\colon V\to W$が同型写像であるなら,
  $\KK$-線形写像$\psi\colon W\to V$で
  $\varphi\circ \psi=\id_W$と
  $\psi\circ \varphi=\id_V$を満たすものが存在する.
  $W$において和やスカラー倍に関してなりたつことは,
  $\psi$を通して, $V$における命題に翻訳できる.
  $\varphi$と$\psi$を使い, 双方を自由に行き来できるので,
  $V$と$W$は$\KK$-線形空間として同一視できる.
\end{remark}

\section{Remarks}

$\KK$-線形空間に関して,
表記方法などについてのいくつかコメントする.
\begin{remark}
$(V,\plus,\act,0_V)$を$\KK$-線形空間とする.
\Cref{def:vecsp:item:sum:ass}
があるので, $v\plus w\plus u$を, $(v\plus w)\plus u$と思っても,
$v\plus (w\plus u)$と思っても差し支えない.
そこで, $(v\plus w)\plus u$を$v\plus w\plus u$と略記する.
\end{remark}
\begin{remark}
$(V,\plus,\act,0_V)$を$\KK$線形空間とする.
\Cref{def:vecsp:item:prod:ass}
があるので, $\alpha \beta w$を, $\alpha\act (\beta\act w)$と思っても,
$(\alpha\cdot\beta)\act w$と思っても差し支えない.
そこで, $(\alpha\act \beta)\act w$を$\alpha \beta w$と略記する.
もっと一般に, $n\geq 1$, $\alpha_1,\ldots,\alpha_n\in\KK$, $w\in V$に対し,
$(\alpha_1\cdots \alpha_n)\act w$のことを
$\alpha_1\cdots \alpha_n w$と略記する.
\end{remark}
\begin{remark}
$(V,\plus,\act,0_V)$を$\KK$線形空間とする.
スカラー倍の方が和よりも演算としての優先度が高いものとし,
$(\alpha\act v)+(\beta\act w)$を
$\alpha\act v+\beta\act w$
と略記する.
\end{remark}

\begin{remark}
\Cref{def:vecsp}にある条件の内,
\Cref{def:vecsp:item:dist:r,def:vecsp:item:dist:l}
は分配則と呼ばれることもある.
特に, \Cref{def:vecsp:item:dist:r}
\begin{align*}
\alpha\in \KK,u,w\in V \implies \alpha\act (u\plus w)=(\alpha\act u)\plus (\alpha\act w)
\end{align*}
が成り立つことを, スカラー倍が$V$の和に対して分配的である
と言い表す.
また,  \Cref{def:vecsp:item:dist:l}
\begin{align*}
\alpha,\beta\in\KK, w\in V\implies (\alpha+\beta)\act w=(\alpha\act w)\plus (\beta\act w)
\end{align*}
が成り立つことを, スカラー倍が$\KK$の加法に対して分配的である
と言い表す.
\Cref{def:vecsp:item:dist:r}に
現れる和は線形空間$V$の和$\plus$であり,
 \Cref{def:vecsp:item:dist:l}に
現れる和は$\KK$の和$+$であり,
異なっていることに注意する必要がある.
\end{remark}

\begin{remark}
$(V,\plus,\act,0_V)$を$\KK$-線形空間とする.
$v_1,\ldots,v_n \in V$に対し,
$\sum_{i=1}^n v_i$を次で定義する:
\begin{align*}
\sum_{i=1}^n v_i
=
\begin{cases}
\left(\sum_{i=1}^{-1} v_i\right)\plus v_n& (n>1)\\
a_1&n=1.
\end{cases}
\end{align*}
$n$限集合$I$の各$i$に対し, $a_i\in V$が与えられているとする.
$I=\Set{j_1,\ldots,j_n}$とし,
$\sum_{i\in I} v_i$を
\begin{align*}
\sum_{i\in I} v_i
\sum_{k=1}^n v_{j_k}
\end{align*}
で定義する.
和$\plus$は
\Cref{def:vecsp:item:com}
を満たすので,
この定義は,
$I=\Set{j_1,\ldots,j_n}$の選び方に依らない.
\end{remark}


\begin{remark}
  $\KK$-線形空間の定義において,
  その条件の中に, $\KK$の割り算は現れない.
  したがって,
  これらの条件を, ある環に対して満たすものという概念を定義することができる.
  環$R$に対して定義された$R$-線形空間を通常は$R$-加群 ($R$-module) と呼ぶ.
\end{remark}

\begin{prop}
  \label{prop:zeroveciszeroscalar}
  $(V,\plus ,\act ,0_V)$を$\KK$-線形空間とする.
  このとき,
  \begin{align*}
    w\in V \implies 0\act w=0_V. 
  \end{align*}
\end{prop}
\begin{proof}
$(V,\plus,\act,0_V)$を$\KK$-線形空間とする.
  このとき,
  \begin{align*}
    0\act w\plus 0\act w&=(0+0)\act w=0\act w\\
    0\act w\plus 0\act w&=0\act w\plus (-0)\act w=0_V.
  \end{align*}
\end{proof}
\begin{prop}
$(V,\plus ,\act ,0_V)$を$\KK$-線形空間とする.
このとき, $\alpha \in\KK$に対し,
\begin{align*}
\alpha \act 0_V = 0_V.
\end{align*}
\end{prop}
\begin{proof}
$\alpha \act 0_V = \alpha \act (0\act 0_V)= (\alpha \cdot 0)\act 0_V=0\act 0_V=0_V$.
\end{proof}


\begin{prop}
  \label{lem:uniq:zero}
  $(V,\plus ,\act ,0_V)$を$\KK$-線形空間とする.
  $o\in V$が, 次の条件を満たすとする:
  \begin{align*}
    w\in V \implies o\plus w=w.
  \end{align*}
  このとき, $o=0_V$.
\end{prop}
\begin{proof}
  $0_V$の満たす条件から$0_V\plus o=o$.
  一方, $o$の満たす条件から$o\plus 0_V=0_V\plus o=0_V$.
  よって, $0_V=0_V\plus o=o$.
\end{proof}
\begin{remark}
\label{rem:altdef:1}
  $(V,\plus,\act,0_V)$を$\KK$線形空間とする.
  \cref{lem:uniq:zero}から,
  零ベクトルの条件を満たす元はただ一つしかないことがわかる.
  したがって, 
  何が$V$の零ベクトルであるかを明示しなくともよい場合は,
  単に$(V,\plus ,\act)$を$\KK$-線形空間と呼ぶこともある.
\end{remark}

\begin{lemma}
  \label{lem:uniq:inv}
  $(V,\plus ,\act ,0_V)$を$\KK$-線形空間とする.
  $w\in V$とする.
  $x,y\in V$が以下を満たすなら$x=y$:
  \begin{align*}
    w\plus x&=0_V\\
    w\plus y&=0_V
  \end{align*}
\end{lemma}
\begin{proof}
  $x$の満たす条件から,
  $y\plus (w\plus x)=y\plus 0_V=y$.
  $y$の満たす条件から,
  $(y\plus w)\plus x=(w\plus y)\plus x=0_V\plus x=x$.
  よって$x=y$.
\end{proof}
\begin{remark}
\label{rem:altdef:2}
$(V,\plus,\act,0_V)$を$\KK$線形空間とすると,
\cref{lem:uniq:inv}から,
各$w\in V$に対し, $w\plus x=0_V$を満たす$x\in V$は
高々一つしかないことがわかる.
\end{remark}
\begin{remark}
  $(-1)\act w$のことを$-w$と略記する.
  また, $u\plus (-w)$のことを$u-w$と略記する.
\end{remark}

\Cref{rem:altdef:1,rem:altdef:2}
を踏まえると$\KK$線形空間は次の様にも定義できる:
\begin{definition}
$V$を集合とする.
$\plus\colon V\times V \to V$を$V$上の二項演算とする.
$\act \colon \KK\times V \to V$を$\KK$の$V$への作用とする.
以下の条件を満たすとき,
$(V,\plus,\act)$は$\KK$上のベクトル空間であるとか
$\KK$-線形空間であるいう:
  \begin{enumerate}
  \item 
    \begin{enumerate}
    \item $u,w \in V\implies  u\plus w=w\plus u$.
    \item
      $v,w,u\in V \implies (v\plus w)\plus u=v\plus (w\plus u)$.
    \item
    次の条件を満たす$o\in V$が存在する
    \begin{enumerate}
          \label{def:vecsp:item:sum:zero}
    \item $w\in V \implies o\plus w=w$.
    \end{enumerate}
    \item
    $o\in V$が\Cref{def:vecsp:item:sum:zero}を満たすとする.
    このとき,
    各$w\in V$に対し, 次の条件を満たす$x_w\in V$が存在する:
\begin{enumerate}
\item $w\plus x_w=0_V$.
\end{enumerate}
    \end{enumerate}
  \item
    \begin{enumerate}
    \item
      $\alpha ,\beta\in\KK, w\in V \implies \alpha \act (\beta\act w)=(\alpha \cdot \beta)\act w$
    \item $w\in V \implies 1\act w=w$.
    \end{enumerate}
  \item
    \begin{enumerate}
    \item $\alpha \in \KK,u,w\in V \implies \alpha \act (u\plus w)=(\alpha \act u)\plus (\alpha \act w)$.
    \item $\alpha ,\beta\in\KK, w\in V\implies (\alpha +\beta)\act w=(\alpha\act w)\plus (\beta\act w)$.
    \end{enumerate}
  \end{enumerate}
\end{definition}




\sectionX{章末問題}
\begin{quiz}
  %\solvelater{quiz:1:1}
  $\KK$を体とし,
  $V$を$\KK$を成分とする$(3,1)$行列の集合とし,
  $W$を$\KK$を成分とする$(2,1)$行列の集合とする.
  $A$を$\KK$を成分とする$(2,3)$行列とし,
  $\zzero=O_{2,1}$とする.
  このとき, 以下は$\KK$-線形空間であることを示せ:
  \begin{align*}
    \Set{x\in V|Ax=\zzero}.
  \end{align*}
\end{quiz}

\begin{quiz}
  %\solvelater{quiz:1:1}
  次が通常の和とスカラー倍で$\KK$線形空間となることを示せ:
  \begin{align*}
    \Set{\begin{pmatrix}x\\x\end{pmatrix}|x\in\KK}
  \end{align*}
\end{quiz}

\begin{quiz}
  %\solvelater{quiz:1:1}
  次が通常の和とスカラー倍で$\KK$線形空間とはならないことを示せ:
  \begin{align*}
    \Set{\begin{pmatrix}x\\0\end{pmatrix}|x\in\KK}
    \cup \Set{\begin{pmatrix}0\\x\end{pmatrix}|x\in\KK}
  \end{align*}
\end{quiz}

\chapter{部分空間}
\label{chap:subspace}
\section{部分空間の定義}
\label{sec:subspace:def}
\begin{definition}
  $(U,\plus,\act,0_U)$を$\KK$-線形空間とする.
  以下の条件を満たすとき,
  $V$を$U$の\defit{部分空間} (部分$\KK$-線形空間)と呼ぶ:
  \begin{enumerate}
  \item $V\subset U$.
  \item $(V,\plus,\act,0_U)$が$\KK$-線形空間.
  \end{enumerate}
\end{definition}
\begin{remark}
  $(U,\plus,\act,0_U)$を$\KK$-線形空間とし, $V\subset U$とする.
このとき, $v,w,u\in U$に対して,
\begin{align*}
  v\plus w&=w\plus v\\
  (v\plus w)\plus u&=v\plus (w\plus u)\\
  0_U\plus w&=w\\
  w\plus (-1)\act w&=0_U
\end{align*}
が成り立っているので,
$v,w,u\in V\subset U$に対しても,
\begin{align*}
  v\plus w&=w\plus v\\
  (v\plus w)\plus u&=v\plus (w\plus u)\\
  0_U\plus w&=w\\
  w\plus (-1)\act w&=0_U
\end{align*}
は成り立つ.
同様の理由で,
$\alpha,\beta\in \KK$, $v,w\in V$に対して,
\begin{align*}
  1\act v&=v\\
  (\alpha\beta)\act v&=\alpha\act(\beta\act v)\\
  (\alpha+\beta)\act v&=\alpha\act v\plus \beta\act v\\
  \alpha\act(v\plus w)&=\alpha\act v\plus \alpha\act w
\end{align*}
が成り立つ.
$(V,\plus ,\act,0_U)$が$\KK$-線形空間であるための条件で非自明なのは,
これらではなく, $\plus $などが$V$上の演算であるかということである.
つまり, 以下の$3$条件が重要である.
\begin{enumerate}
  \item $0_U\in V$.
  \item $v,w\in V \implies v\plus w\in V$.
  \item $\alpha\in\KK$, $v\in V \implies \alpha\act v\in V$.
\end{enumerate}
\end{remark}
\begin{lemma}
  $(U,\plus ,\act,0_U)$を$\KK$-線形空間とし, $V\subset U$とする.
  このとき以下は同値:
  \begin{enumerate}
  \item $V$が$U$の部分空間.
  \item 以下の$3$条件を満たす:
    \begin{enumerate}
  \item $0_U\in V$.
  \item $v,w\in V \implies v\plus w\in V$.
  \item $\alpha\in\KK$, $v\in V \implies \alpha\act v\in V$.
    \end{enumerate}
  \item 以下の$2$条件を満たす:
    \begin{enumerate}
  \item $0_U\in V$.
  \item $v,w\in V, \alpha,\beta\in\KK \implies \alpha\act v\plus \beta\act w\in V$.
    \end{enumerate}
  \item 以下の$3$条件を満たす:
    \begin{enumerate}
  \item $V\neq \emptyset$.
  \item $v,w\in W \implies v\plus w\in V$.
  \item $\alpha\in\KK$, $v\in V \implies \alpha\act v\in V$.
    \end{enumerate}
  \item 以下の$2$条件を満たす:
    \begin{enumerate}
  \item $V\neq \emptyset$.
  \item $v,w\in V, \alpha,\beta\in\KK \implies \alpha\act v\plus \beta\act w\in V$.
    \end{enumerate}
  \end{enumerate}
\end{lemma}

\begin{remark}
$U$を$\KK$-線形空間とし,
$W\subset U$を$U$の部分空間とする.
$V\subset W$とすると,
$V\subset W\subset U$となっている.
このとき, 以下は同値である:
\begin{enumerate}
\item $V$は$W$の部分空間.
\item $V$は$U$の部分空間.
\end{enumerate}
\end{remark}


\begin{example}
  $(U,\plus ,\act,0_U)$を$\KK$-線形空間とする.
  $U$は$U$の部分空間である.
  $\Set{0_U}$は$U$の部分空間である.
  この2つを$U$の\defit{自明な部分空間}と呼ぶ.
\end{example}

\begin{example}
  $a\in \KK^2\setminus\Set{\zzero_2}$とする.
  このとき, $\Set{ta|t\in \KK}$は原点と$a$を通る直線である.
  これは, $\KK^2$の非自明な部分空間である.
\end{example}
\begin{proof}\end{proof}


\section{生成系で定義される部分空間}

\begin{example}
  $(V,\plus,\act,0_V)$を$\KK$線形空間とし,
  $w_1,\ldots,w_r\in V$とする.
  このとき,
  \begin{align*}
  \Braket{w_1,\ldots,w_r}_{\KK}=\Set{a_1\act w_1\plus\cdots \plus a_r\act w_r|a_i\in\KK}
  \end{align*}
  とおく.
  このとき,
  $\Braket{w_1,\ldots,w_r}_{\KK}$は$V$の部分空間である.
組$(w_1,\ldots,w_r)$を
部分空間$\Braket{w_1,\ldots,w_r}_{\KK}$の生成系と呼び,
$\Braket{w_1,\ldots,w_r}_{\KK}$を
$(w_1,\ldots,w_r)$で生成される$V$の部分空間と呼ぶ.
\end{example}
\begin{proof}\end{proof}



\begin{prop}
  $(V,\plus,\act,0_V)$を$\KK$線形空間とし,
  $w_1,\ldots,w_r\in V$とする.
  このとき,
  $\Braket{w_1,\ldots,w_r}_{\KK}$
  は,
  $w_1,\ldots,w_r$を含む最小の$V$の部分空間である.
\end{prop}

\begin{lemma}
  \label{lem:gen:inclusion}
  $U$を$\KK$線形空間とする.
  $v_1,\ldots,v_n,w_1,\ldots,w_m\in U$に対し,
  以下は同値:
  \begin{enumerate}
  \item $\Braket{v_1,\ldots,v_n}_{\KK}\subset\Braket{w_1,\ldots,w_m}_{\KK}$.
  \item $\Set{v_1,\ldots,v_n}_{\KK}\subset\Braket{w_1,\ldots,w_m}_{\KK}$.
  \end{enumerate}
\end{lemma}
したがって,
次が成り立つ:
\begin{lemma}
  \label{thm:gens:eq}
  $U$を$\KK$線形空間とする.
  $v_1,\ldots,v_n,w_1,\ldots,w_m\in U$に対し,
  以下は同値:
  \begin{enumerate}
  \item $\Braket{v_1,\ldots,v_n}_{\KK}=\Braket{w_1,\ldots,w_m}_{\KK}$.
  \item $\Set{v_1,\ldots,v_n}_{\KK}\subset\Braket{w_1,\ldots,w_m}_{\KK}$かつ
    $\Set{w_1,\ldots,w_m}_{\KK}\subset\Braket{v_1,\ldots,v_n}_{\KK}$.
  \end{enumerate}
\end{lemma}

\begin{lemma}
  $U$を$\KK$線形空間とし,
  $v_1,\ldots,v_n\in U$とする.
  このとき, 以下が成り立つ:
  \begin{enumerate}
  \item
    $c\in \KK\setminus\Set{0}$, $i\in\Set{1,\ldots,n}$に対し,
    \begin{align*}
      \Braket{v_1,\ldots,v_{i-1},v_{i},v_{i+1},\ldots,v_n}_{\KK}=
      \Braket{v_1,\ldots,v_{i-1},cv_{i},v_{i+1},\ldots,v_n}_{\KK}
    \end{align*}
  \item
    $c\in \KK$, $i,j\in\Set{1,\ldots,n}$ ($i\neq j$)に対し,
    \begin{align*}
      \Braket{v_1,\ldots,v_{i-1},v_{i},v_{i+1},\ldots,v_n}_{\KK}=
      \Braket{v_1,\ldots,v_{i-1},v_i+cv_{j},v_{i+1},\ldots,v_n}_{\KK}
    \end{align*}
  \item
    $i,j\in\Set{1,\ldots,n}$ ($i< j$)に対し,
    \begin{align*}
      \Braket{v_1,\ldots,v_n}_{\KK}=
      \Braket{v_1,\ldots,v_{i-1},v_j,v_{i+1},\ldots,v_{j-1},v_i,v_{j+1},,\ldots,v_n}_{\KK}
    \end{align*}
  \end{enumerate}
\end{lemma}

\begin{lemma}
  $(V,\plus,\act,0_V)$を$\KK$線形空間とする.
  $v_1,\ldots,v_n\in V$に対し,
    \begin{align*}
      \Braket{v_1,\ldots,v_n}_{\KK}=
      \Braket{v_1,\ldots,v_n,0_V}_{\KK}.
    \end{align*}
\end{lemma}

ベクトルの和は可換であるので次が成り立つ.
\begin{lemma}
  $(V,\plus,\act,0_V)$を$\KK$線形空間とする.
  $v_1,\ldots,v_n\in V$とし,
  $\sigma$を$\Set{1,\ldots,n}$から$\Set{1,\ldots,n}$への全単射とする.
  このとき,
    \begin{align*}
      \Braket{v_1,\ldots,v_n}_{\KK}=
      \Braket{v_{\sigma(1)},\ldots,v_{\sigma(n)}}_{\KK}.
    \end{align*}
\end{lemma}


$a\in\KK^n$が与えられた部分空間に含まれるかについて調べる方法について考える.
そのためにいくつか記号や用語を用意する:
以下では$\KK^n$について考える.
$\KK^n$の元$\aaa$の添字の集合を$I$とする.
つまり$I=\Set{1,\ldots,n}$とする.
計算方法を考えるにあたり$I$の元の大小を比較することがある.
この際の比較は, 成分としての実数の大小を比較するというのとは,
役割が異なっている.
その役割をはっきりさせるため, $\rhd$という記号を用意する.
\begin{definition}
  $\rhd$と$\unrhd$を,
  $i,j\in I$に対し,
  \begin{align*}
    i\rhd j &\iff i \leq j,\\
    i\unrhd j &\iff i \leq j
  \end{align*}
  で定義する.
\end{definition}
$I$は, 列ベクトル$\aaa=(a_i)_{i\in I} \in \KK^n$の添字集合である.
$i\rhd j$というのは,
$i$行の方が$j$行よりも上にあること (前にあること) を意味している.

\begin{definition}
$I=\Set{1,\ldots,n}$とする.
$\aaa=(a_i)_{i\in I}\in \KK^n\setminus\Set{\zzero_n}$
に対し,
\begin{align*}
  \lp(\aaa)
  &=\max_{\unrhd} \Set{i\in I |a_i\neq 0}\\
  &=\min\Set{i\in I |a_i\neq 0}
\end{align*}
とおき,
$\lp(\aaa)$を$\aaa$のpivotもしくはleading position (もしくは先頭)
と呼ぶことにする.
つまり,
すべての$i\in \Set{i\in I |a_i\neq 0}$に対し,
$\lp(\aaa)\unrhd i$
\end{definition}

\begin{definition}
  $\aaa\in\KK^n$が以下の条件を満たすとき,
  $\aaa$はmonicであるということにする:
  \begin{enumerate}
  \item $\aaa\neq\zzero_n$.
  \item $\aaa$の第$\lp(\aaa)$成分は$1$,
  \end{enumerate}
\end{definition}

\begin{definition}
  $X\subset \KK^n\setminus\Set{\zzero_n}$とする.
  次の条件を満たしているとき,
  $\aaa\in\KK^n$は$X$で簡約済みである
  ということにする:
  \begin{enumerate}
  \item すべての$\bbb\in X$に対し, $\aaa$の第$\lp(\bbb)$成分は$0$.
  \end{enumerate}
\end{definition}

\begin{definition}
  $\aaa_1,\ldots,\aaa_{r} \in\KK^n$とする.
  以下の条件を満たしているとき,
  $(a_1,\ldots, a_r)$は,
  $\Braket{\aaa_1,\ldots, \aaa_r}_{\KK}$の,
  簡約済みの生成系であるということにする:
  \begin{enumerate}
  \item すべての$j$に対し, $\aaa_{j}$はmonic. 
  \item すべての$j$に対し, $\aaa_{j}$は$\Set{\aaa_{1},\ldots,\aaa_{j-1},\aaa_{j+1},\ldots, \aaa_{r}}$で簡約済み. 
  \end{enumerate}
\end{definition}



まずは,
次の計算手続きを考える:
\begin{algorithm}\makebox{}
\begin{description}
\item[Input]
数ベクトル$\aaa\in \KK^n$,
有限集合$X\subset\KK^n\setminus\Set{\zzero_n}$.
\item[Proceedure]\makebox{}
  \begin{enumerate}
  \item $\rr$を$\aaa$とする.
  \item 条件`$\rr$の第$\lp(\bbb)$成分が$0$ではない' を満たす$\bbb\in X$がある間, 以下を繰り返す:
    \begin{enumerate}
    \item $\bbb\in X$が条件`$\rr$の第$\lp(\bbb)$成分が$0$ではない'をみたすとする.
    \item $c$を$\rr$の第$\lp(\bbb)$成分とする.
    \item $c'$を$\bbb$の第$\lp(\bbb)$成分とする.
    \item $\rr$を$\rr-\frac{c}{c'}\bbb$に更新する.
    \end{enumerate}
  \item $\rr$を出力し終了.
  \end{enumerate}
\end{description}
\end{algorithm}

\begin{remark}
  `$x$を$y$とする.' といった場合,
  次の$2$通りの解釈が可能な場合がある:
  \begin{enumerate}
  \item $x=y$を満たすように, $x$の値を変更する.
  \item $x=y$を満たすように, $y$の値を変更する.
  \end{enumerate}
  このような誤解を防ぐため,
  `$x=y$を満たすように, $x$の値を変更する'
  ということを表すときには,
  次のように書くこととする:
  \begin{itemize}
    \item $x\denotes y$とする.
  \end{itemize}
  また,
  `$x$の値を, $y$という値に更新する'
  という意味でもこの表記を用いることにする.
  例えば, `現在の$x$を使って表される$x+2$という値に,
  $x$を更新する'ということを表すのに以下のように書く:
  \begin{itemize}
    \item $x\denotes x+2$とする.
  \end{itemize}
\end{remark}

これらの表記を用いて書き直すと以下のようになる:
\begin{algorithm}\makebox{}
  \label{alg:redvec}
\begin{description}
\item[Input]
数ベクトル$\aaa\in \KK^n$,
有限集合$X\subset\KK^n\setminus\Set{\zzero_n}$.
\item[Proceedure]\makebox{}
  \begin{enumerate}
  \item $\rr\denotes \aaa$とする.
  \item 条件`$\rr$の第$\lp(\bbb)$成分が$0$ではない' を満たす$\bbb\in X$がある間, 以下を繰り返す:
    \begin{enumerate}
    \item
      \label{alg:redvec:step:choice}
      $\bbb\in X$が条件`$\rr$の第$\lp(\bbb)$成分が$0$ではない'をみたすとする.
    \item $c\denotes (\text{$\rr$の第$\lp(\bbb)$成分})$とする.
    \item $c'\denotes (\text{$\bbb$の第$\lp(\bbb)$成分})$とする.
    \item
      \label{alg:redvec:step:red}
      $r\denotes r-\frac{c}{c'}b$とする.
    \end{enumerate}
  \item $r$を出力し終了.
  \end{enumerate}
\end{description}
\end{algorithm}

条件を満たす$b\in X$が複数あった場合の選び方を指定していないので,
考えにくいものの, 次が言える:
\begin{prop}
  \Cref{alg:redvec}は
  有限回のステップで必ず終了し数ベクトルを出力する.
\end{prop}
\begin{proof}\end{proof}

\begin{remark}
  \Cref{alg:redvec}の手続きのように,
  与えられた入力に対し,
  有限回のステップで必ず終了する手続きをアルゴリズムと呼ぶ.
\end{remark}

\Cref{alg:redvec}は有限回のステップで必ず終了し数ベクトルを出力する.
その出力を$\reduce(\aaa,X)$で表すことにする.
このとき, 次が言える:
\begin{prop}
$\aaa\in\KK^n$とし, $X=\Set{\bbb_1,\ldots,\bbb_r}\subset\KK^n$とする.
  $\aaa'=\reduce(\aaa,X)$とする.
  このとき, 以下が成り立つ:
  \begin{enumerate}
  \item $\aaa'$は$X$で簡約済み.
  \item $\aaa'-\aaa \in \Braket{\bbb_1,\ldots,\bbb_r}_\KK$.
  \end{enumerate}
\end{prop}
\begin{cor}
  $\aaa,\bbb_1,\ldots,\bbb_r\in \KK^n$とし,
  $\aaa'=\reduce(\aaa,\Set{\bbb_1.\ldots,\bbb_r})$とする.
  このとき,
  \begin{align*}
    \Braket{\aaa,\bbb_1.\ldots,\bbb_r}_\KK=\Braket{\aaa',\bbb_1.\ldots,\bbb_r}_\KK
  \end{align*}
\end{cor}

\Cref{alg:redvec}は有限回のステップで必ず終了し数ベクトルを出力するが,
$X$の中に
$\lp(\bbb)=\lp(\bbb')$を満たす$\bbb\neq \bbb'$があったときには,
\Cref{alg:redvec:step:choice}における$\bbb$の選び方に出力は依存する.
しかし, 次がわかる:
\begin{prop}
  $\aaa,\bbb_1,\ldots,\bbb_r\in \KK^n$とする.
  $(\bbb_1,\ldots,\bbb_r)$が簡約済みの生成系であるとき,
  $\reduce(\aaa,\Set{\bbb_1,\ldots,\bbb_r})$は,
  手順によらずただ一つに定まる.
  特に,
  $\aaa=(a_i)_{i \in I}$に対して
  \begin{align*}
    \reduce(\aaa,\Set{\bbb_1,\ldots,\bbb_r})
    &=
    \aaa-\sum_{j=1}^{r} a_{\lp(\bbb_j)}\bbb_j
  \end{align*}
  である.
\end{prop}
さらに次がわかる:
\begin{prop}
  $\aaa,\bbb_1,\ldots,\bbb_r\in \KK^n$とする.
  $(\bbb_1,\ldots,\bbb_r)$が簡約済みの生成系であるとき,
  次は同値:
  \begin{enumerate}
  \item $\reduce(\aaa,\Set{\bbb_1,\ldots,\bbb_r})=\zzero_n$.
  \item $\aaa\in \Braket{\bbb_1,\ldots,\bbb_r}_{\KK}$.
  \end{enumerate}
\end{prop}


したがって, 与えられた生成系を簡約済みの生成系に変形できれば,
\Cref{alg:redvec}をつかって,
与えらたベクトルが部分空間に含まれるかがわかる.
そこで,
与えられた生成系を簡約済みの生成系に変形する方法を考える.

$\aaa=(a_i)_{i\in I}\in \RR^m\setminus\Set{\zzero_{m}}$に対し,
$a_{\lp(\aaa)}\neq 0$であり, その逆数によるスカラー倍
\begin{align*}
  \frac{1}{a_{\lp(\aaa)}}\aaa
\end{align*}
はmonicである.
これを$\mono(\aaa)$と書く.

\begin{algorithm}\makebox{}
  \label{alg:redens}
\begin{description}
\item[Input]
  有限集合$X\subset\KK^n$.
\item[Proceedure]\makebox{}
  \begin{enumerate}
  \item $R\denotes \Set{ \aaa \in X| \aaa\neq \zzero_n}$.
  \item $R\setminus\Set{b}$で簡約済みでない$b\in X$が存在する間,
    以下を繰り返す:
    \begin{enumerate}
    \item $b\in R$が$R\setminus\Set{b}$で簡約済みでないとする.
    \item $R'\denotes R\setminus\Set{b}$とする.
    \item $a\denotes\reduce(b,R')$とする.
    \item $a\neq \zzero_n$ならば, 以下を行う:
      \begin{enumerate}
      \item $R\denotes R'\cup \Set{\mono(\aaa)}$とする.
      \end{enumerate}
      そうでないなら, 以下を行う:
      \begin{enumerate}
      \item $R\denotes R'$とする.
      \end{enumerate}
    \end{enumerate}
  \item $R$を出力し終了.
  \end{enumerate}
\end{description}
\end{algorithm}
この手続きに対し以下が言える:
\begin{prop}
  \Cref{alg:redens}は
  有限回のステップで必ず終了し,
  数ベクトルからなる有限集合を出力する.
\end{prop}
\begin{proof}\end{proof}
\Cref{alg:redens}の出力を
$\reduce(X)$で表すことにする.

\begin{prop}
  $\bbb_1,\ldots,\bbb_r\in\KK^n$とし,
  $\Set{\aaa_1,\ldots,\aaa_{k}}=\reduce(\Set{\bbb_1,\ldots,\bbb_r})$
  とする.
  このとき, 以下が成り立つ:
  \begin{enumerate}
  \item $(\aaa_1,\ldots,\aaa_{k})$は$\Braket{\bbb_1,\ldots,\bbb_r}_\KK$の簡約済みの生成系.
  \end{enumerate}
\end{prop}
\begin{proof}\end{proof}

次に, 
$V=W$を判定する方法について考える.
$v\in \Braket{\bbb_1,\ldots,\bbb_r}_\KK$が判定できるので,
\cref{thm:gens:eq}を利用して判定することもできるが,
簡約済みの生成系に関しては次が成り立つ.
\begin{theorem}
  $\aaa_1,\ldots,\aaa_r,\bbb_1,\ldots,\bbb_k\in \KK^n$とし,
  $(\aaa_1,\ldots,\aaa_r)$は$\Braket{\aaa_1,\ldots,\aaa_r}_\KK$の簡約済みの生成系,
  $(\bbb_1,\ldots,\bbb_k)$は$\Braket{\bbb_1,\ldots,\bbb_k}_\KK$の簡約済みの生成系とする.
  このとき,
  以下は同値:
  \begin{enumerate}
  \item $\Braket{\aaa_1,\ldots,\aaa_r}_\KK=\Braket{\bbb_1,\ldots,\bbb_k}_\KK$.
  \item $\Set{\aaa_1,\ldots,\aaa_r}_\KK=\Set{\bbb_1,\ldots,\bbb_k}_\KK$.
  \end{enumerate}
\end{theorem}
\begin{cor}
  \Cref{alg:redens}による出力は,
  途中の選択によらず, 入力によって一意に定まる.
\end{cor}

\begin{remark}
ここでは, 
\begin{align*}
i\unrhd j \iff i \leq j
\end{align*}
$\unrhd$を定め,
この順序に基づき$\lp$を定義しアルゴリズムを構成した.
$\lp(\aaa)$を定めるにあたり規則的に添字を選ぶことができれば,
この順序である必要はなく,
$\unrhd$を別の
全順序にに取り替えて
も同様に話は進む.
\end{remark}
  


\section{部分空間から得られる部分空間}
\label{sec:subspace:sub}

ここでは, 部分空間から新たな部分空間を構成する方法を考える.

まずは, $V,W$という2つの$U$の部分空間が与えられたとき,
その両方に含まれる部分空間について考える.
\begin{example}
  $U$を$\KK$-線形空間とする.
  $V, W$を$U$の部分空間とする.
  このとき, $V\cap W$は$U$の部分空間.
\end{example}
\begin{proof}\end{proof}
\begin{prop}
  $U$を$\KK$-線形空間とする.
  $V, W$を$U$の部分空間とする.
  このとき, $V\cap W$は$V$と$W$の両方に含まれる部分空間のうち最大のものである.
\end{prop}

もっと一般に次を考えることもできる.
\begin{example}
  $U$を$\KK$-線形空間とする.
  $I$を集合とし,
  $i\in I$に対し, $V_i$を$U$の部分空間とする.
  このとき, $\bigcap_{i\in I}V_i$は$U$の部分空間である.
\end{example}
\begin{proof}\end{proof}


次に, $V,W$という2つの$U$の部分空間が与えられたとき,
その両方を含む部分空間について考える.

\begin{example}
  \label{subspace:nonexample:cup}
  \begin{align*}
    V&=\Set{\begin{pmatrix}a\\0\end{pmatrix}|a\in\KK}\\
    W&=\Set{\begin{pmatrix}0\\a\end{pmatrix}|a\in\KK}
  \end{align*}
  とする.
  このとき, $V$も$W$も$\KK^2$の部分空間である.
  \begin{align*}
    \begin{pmatrix}1\\0\end{pmatrix},
    \begin{pmatrix}0\\1\end{pmatrix}\in V\cup W
  \end{align*}
  であるが,
  \begin{align*}
    \begin{pmatrix}1\\0\end{pmatrix}+
    \begin{pmatrix}0\\1\end{pmatrix}=\begin{pmatrix}1\\1\end{pmatrix}\not\in V\cup W
  \end{align*}
  となっており, $V\cup W$は$U$の部分空間ではない.
\end{example}
この例からわかるように, $V\cup W$は一般には和で閉じていないので,
部分空間とならない.

\begin{example}
  $(U,\plus ,\act,0_V)$を$\KK$-線形空間とする.
  $V, W$を$U$の部分空間とする.
  このとき,
  \begin{align*}
    V+W=\Set{v\plus w|v\in V,w\in W}
  \end{align*}
  とおく.
  このとき, $V+W$は$U$の部分空間.
  $V+W$を$V$と$W$の\defit{和空間}と呼ぶことがある.
\end{example}
\begin{proof}\end{proof}
\begin{prop}
  $(U,\plus ,\act,0_V)$を$\KK$-線形空間とし,
  $V, W$を$U$の部分空間とする.
  \begin{align*}
    \SSS=\Set{U'|\text{$U'$は$U$の部分空間,} V\cup W \subset U'}
  \end{align*}
  とおく.  
  \begin{align*}
    U_0 = \bigcap_{U'\in\SSS} U'
  \end{align*}
  とする.  また, $\SSS$の中で包含関係で極小なものを$U_1$とする.
  このとき,
  \begin{align*}
    U_0=U_1=V+W.
  \end{align*}
\end{prop}
\begin{proof}
\end{proof}

\begin{definition}
  $U$を$\KK$-線形空間とし,
  $V$, $W$を$U$の部分空間とする.
  次の条件を満たすとき,
  $U$は$V$と$W$の\defit{(内部)直和に分解できる}\addindex{内部直和}\addindex{直和!内部---}という.
  \begin{enumerate}
  \item $U=V+W$.
  \item $V\cap W=\Set{0_U}$.
  \end{enumerate}
  $U$が$V$と$W$の(内部)直和に分解できることを,
  $U=V\oplus W$と書き表す.
  また$V$や$W$のことを$U$の\defit{直和因子}と呼ぶことがある.
\end{definition}

\begin{prop}
  $U=V\oplus W$であるとき,
  $v,v'\in V$,
  $w,w'\in W$に対し, 以下は同値:
  \begin{enumerate}
  \item $v\plus w=v'\plus w'$.
  \item $v=v'$, $w=w'$.
  \end{enumerate}
\end{prop}
\begin{proof}
  \paragraph{$v\plus w=v'\plus w'\implies v=v', w=w'$}
  $v\plus w=v'\plus w'$であるので,
  $-v'\plus v=-w\plus w'$.
  左辺は$V$の元, 右辺は$W$の元であるから,
  これらは, $V\cap W$の元.
  よって, $0_U$である.
  $-v'\plus v=0_U$であるので, $v=v'$.
  $-w'\plus w=0_U$であるので, $w=w'$.
  
  \paragraph{$v=v', w=w'\implies v\plus w=v'\plus w'$}
  明らか.
\end{proof}


$U$が$U=V_1\oplus W_1$と内部直和に分解され,
$W_1$が$V_2\oplus W_2$と内部直和に分解され,
$W_2$が$V_3\oplus W_3$と内部直和に分解され,
ということが繰り返された状況を考える.
つまり,
$U=V_1\oplus (V_2\oplus \cdots \oplus(V_{l-1}\oplus V_l))$
と分解されていることを考える.
\begin{definition}
$U=V_1\oplus (V_2\oplus \cdots \oplus(V_{l-1}\oplus V_l))$
と内部直和に分解されているとき,
$U$は$U=V_1\oplus V_2\oplus \cdots \oplus V_l$
と(内部)直和に分解されると言う.
\end{definition}
\begin{prop}
  $(U,\plus,\ast,0_U)$を$\KK$-線形空間とし, $V_i\subset U$を$U$の部分空間とし,
  $U=V_1+\cdots+ V_l$を満たすとする.
  このとき, 以下は同値である:
  \begin{enumerate}
  \item $U=V_1\oplus \cdots \oplus V_l$と内部直和に分解される.
  \item 全ての$i$に対して,
    \begin{align*}
      V_i \cap (V_1+\cdots+ V_{i-1}+V_{i+1}+\cdots+ V_{l})=\Set{0_U}.
    \end{align*}
  \end{enumerate}
\end{prop}


次に, 数ベクトル空間の部分空間について$V\cap W$や$V+W$について計算する方法について考える.

特別な空間との共通部分は簡単に計算できる.
\begin{prop}
  $I=\Set{1,\ldots, n}$とする.
  $k\in I$に対し
  \begin{align*}
    U_k=\Set{(a_i)_{i\in I}\in\KK^n| i\rhd k \implies a_i=0}
  \end{align*}
  とする.
  $\bbb_1,\ldots,\bbb_r \in \KK^n \setminus\Set{\zzero_n}$とし,
  $V=\Braket{\bbb_1,\ldots,\bbb_r}_\KK$とする.
  $\bbb_i$のうち, $\bbb_i\in U_k$となるものだけを集めて,
  $\bbb_{i_1},\ldots, \bbb_{i_d}$とする.
  このとき,
  $(\bbb_1,\ldots,\bbb_r)$が$V$の簡約済みの生成系ならば,
  $(\bbb_{i_1},\ldots, \bbb_{i_d})$は
  $V\cap U_k$
  の簡約済みの生成系である.
  
\end{prop}
